<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-list/core-list.html">

<polymer-element name="events-list">
    <template>

        <!-- Custom CSS -->
        <link href="events-list.css" rel="stylesheet">


        <div id="wrap">
            <div hidden?="{{upcoming == null}}">
                <span class="header-title">Upcoming Event</span>
                <div class="upcoming {{ {selected: selected} | tokenList }}">
                    <div class="message" style="background-image: url({{spotify.track.artwork}});">
                        <div class="title"><em><strong>{{spotify.track.title}}</strong> by {{spotify.track.artist}}</em></div>
                        <div class="uri">{{spotify.track.uri}}</div>
                        <div class="event">{{upcoming.startTime}} [{{upcoming.startEvent}}] &#8658; {{spotify.track.time}} [{{upcoming.endEvent}}]</div>
                    </div>
                </div>
            </div>

            <div hidden?="{{data == null || data.length == 0}}">
                <span class="header-title">Pending Events</span>
                <core-list data="{{data}}" height="90">
                    <template>
                        <div class="item {{ {selected: selected} | tokenList }}">
                            <div class="message" style="background-image: url({{image}});">
                                <div class="title"><em><strong>{{title}}</strong> by {{artist}}</em></div>
                                <div class="uri">{{uri}}</div>
                                <div class="event">{{startTime}} [{{startEvent}}] &#8658; {{endTime}} [{{endEvent}}]</div>
                            </div>
                        </div>
                    </template>
                </core-list>
            </div>
        </div>

    </template>

    <script>
        Polymer('events-list', {

            data: null,
            upcoming: null,
            spotify: null,

            ready: function() {
                this.data = this.generateData();
                this.upcoming = this.generateUpcoming();
            },

            generateUpcoming: function() {
                var data = {
                    startTime: '0:00',
                    startEvent: 'track-changed',
                    endEvent: 'track-playing'
                };
                return data;
            },

            generateData: function() {
                var data = [];
                for (var i=0; i<5; i++) {
                    data.push({
                        uri: "spotify:track:7skutlFh5m9qOpfgZMSenH",
                        artist: "Sigur RÃ³s",
                        title: "Valtari",
                        startTime: '0:00',
                        startEvent: 'track-changed',
                        endTime: '3:54',
                        endEvent: 'track-paused',
                        image:  'elements/spotify-player/images/3a0f72f604b4f7bcb06fad0f0ab8e00ae6623dd7.jpg'
                    });
                }
                return data;
            }
        });
    </script>

</polymer-element>